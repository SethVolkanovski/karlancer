// Phone (tel:)
  (function(){
    const p = normalizePhone(CONFIG.phone);
    const a = el("link-phone");
    if(p){
      a.href = tel:${p};
      // اگر دسکتاپ بود، پیام راهنما نشان بده
      if(!isMobile){
        a.addEventListener("click", function(e){
          e.preventDefault();
          alert("این لینک روی گوشی Dialer را باز می‌کند. برای تست واقعی، روی موبایل باز کنید:\n" + tel:${p});
        });
      }
    } else { a.classList.add("hidden"); }
  })();

  // Email (mailto)
  (function(){
    const mail = safeEmail(CONFIG.email);
    const a = el("link-email");
    if(mail){
      const params = new URLSearchParams();
      if(CONFIG.emailSubject) params.set("subject", CONFIG.emailSubject);
      if(CONFIG.emailBody)    params.set("body", CONFIG.emailBody);
      const qp = params.toString();
      a.href = mailto:${mail}${qp ? ("?" + qp) : ""};
      if(!isMobile){
        a.addEventListener("click", function(e){
          // روی دسکتاپ هم معمولاً اپ ایمیل باز می‌شود، ولی اگر نبود:
          setTimeout(()=>{},0);
        });
      }
    } else { a.classList.add("hidden"); }
  })();

  // Address / Maps
  if(CONFIG.addressText){
    el("link-address").href = mapLink(CONFIG.addressText);
  } else { el("link-address").classList.add("hidden"); }

  // اگر همه خالی شد، هشدار بده
  const allHidden = [...document.querySelectorAll(".links a")].every(x=>x.classList.contains("hidden"));
  if(allHidden) el("warn").classList.remove("hidden");
})();
</script>
</body>
</html>
