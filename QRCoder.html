<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QR Contact Hub â€” Ø¢ÙÙ„Ø§ÛŒÙ†</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#ff3b3b;--text:#e6eef8}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Vazir',sans-serif;background:linear-gradient(180deg,#071128 0%, #0b1b2c 100%);color:var(--text);}
    .wrap{max-width:720px;margin:28px auto;padding:20px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.04);padding:18px;border-radius:14px}
    h1{margin:0 0 12px;font-size:20px}
    .actions{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    a.btn{display:inline-flex;align-items:center;justify-content:flex-start;gap:10px;padding:12px;border-radius:10px;text-decoration:none;color:var(--text);background:transparent;border:1px solid rgba(255,255,255,0.04)}
    .small{font-size:13px;color:rgba(230,238,248,0.75);margin-top:8px}
    .controls{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap}
    input[type=text],input[type=email]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--text)}
    label{display:block;margin-top:10px;font-size:13px;color:rgba(230,238,248,0.9)}
    .row{display:flex;gap:10px}
    .qrwrap{display:flex;gap:14px;align-items:center;margin-top:12px}
    canvas, img.qr{width:180px;height:180px;border-radius:10px;background:#fff;padding:6px}
    .muted{color:rgba(230,238,248,0.6);font-size:13px}
    .note{font-size:13px;color:rgba(230,238,248,0.8);margin-top:8px}
    button.primary{background:var(--accent);color:#fff;padding:10px 12px;border-radius:10px;border:0;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:10px 12px;border-radius:10px;cursor:pointer}
    footer{margin-top:18px;font-size:12px;color:rgba(230,238,248,0.6)}
    @media (max-width:520px){.actions{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <main class="wrap">
    <div class="card">
      <h1>QR Contact Hub â€” ØµÙØ­Ù‡Ù” ØªÙ…Ø§Ø³ Ø¢ÙÙ„Ø§ÛŒÙ†</h1>
      <p class="small">Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯ØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ØŒ Ø³Ù¾Ø³ Ø¨Ø§ Â«Ø³Ø§Ø®Øª QRÂ» ÛŒÚ© QR Ø­Ø§ÙˆÛŒ Ù‡Ù…ÛŒÙ† ØµÙØ­Ù‡ (data URL) Ø³Ø§Ø®ØªÙ‡ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯. ÙˆÙ‚ØªÛŒ Ø¯ÛŒÚ¯Ø±Ø§Ù† QR Ø±Ø§ Ø§Ø³Ú©Ù† Ú©Ù†Ù†Ø¯ØŒ Ù‡Ù…Ø§Ù† ØµÙØ­Ù‡Ù” Ø³Ø§Ø¯Ù‡Ù” Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„â€ŒØ´Ø§Ù† Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¨Ø§ Ù„Ù…Ø³ Ù‡Ø± Ú¯Ø²ÛŒÙ†Ù‡ ÙˆØ§Ø±Ø¯ Ø§Ù¾ Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯ (Ø§Ú¯Ø± Ù†ØµØ¨ Ø¨Ø§Ø´Ø¯).</p>

      <!-- editable fields -->
      <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ (Ø¨Ø§ Ú©Ø¯ Ú©Ø´ÙˆØ±ØŒ Ù…Ø«Ø§Ù„: +98912...)</label>
      <input id="phone" type="text" placeholder="+98912..." value="+989121234567">

      <label>Ø´Ù…Ø§Ø±Ù‡ ÙˆØ§ØªØ³Ø§Ù¾ (Ø¨Ø¯ÙˆÙ† + ÛŒØ§ Ø¨Ø§ØŒ Ù†Ø³Ø®Ù‡ wa.me Ø§Ø² Ø´Ù…Ø§Ø±Ù‡ Ø¨Ø¯ÙˆÙ† +)</label>
      <input id="wa" type="text" placeholder="989121234567" value="989121234567">

      <label>Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… (Ø¨Ø¯ÙˆÙ† @)</label>
      <input id="tg" type="text" placeholder="username" value="your_telegram">

      <label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…</label>
      <input id="ig" type="text" placeholder="username" value="your_instagram">

      <label>Ø§ÛŒÙ…ÛŒÙ„</label>
      <input id="email" type="email" placeholder="you@example.com" value="you@example.com">

      <label>Ø¢Ø¯Ø±Ø³ (Ù…ØªÙ† ÛŒØ§ Ù…Ø®ØªØµØ§Øª lat,lng)</label>
      <input id="addr" type="text" placeholder="Tehran, Iran OR 35.6892,51.3890" value="Tehran, Iran">

      <div class="controls">
        <button class="primary" id="build">Ø³Ø§Ø®Øª ØµÙØ­Ù‡ Ùˆ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</button>
        <button class="ghost" id="buildAndQR">Ø³Ø§Ø®Øª + ØªÙˆÙ„ÛŒØ¯ QR (PNG)</button>
        <button class="ghost" id="downloadHtml">Ø¯Ø§Ù†Ù„ÙˆØ¯ HTML</button>
      </div>

      <div id="previewArea" style="margin-top:14px;display:none">
        <div style="background:#071124;border-radius:12px;padding:12px">
          <div id="preview"></div>
          <div class="qrwrap">
            <canvas id="qrCanvas" style="display:none"></canvas>
            <img id="qrImg" class="qr" style="display:none" alt="QR code"/>
            <div>
              <div class="muted">Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ QR / ØªØµÙˆÛŒØ±</div>
              <div class="note">(Ø§Ú¯Ø± QR Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯ØŒ Ø±ÙˆÛŒ ØªØµÙˆÛŒØ± Ø±Ø§Ø³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯)</div>
            </div>
          </div>
        </div>
      </div>

      <p class="note">* Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¢ÙÙ„Ø§ÛŒÙ† Ú©Ø§Ø± Ú©Ù†ÛŒØ¯: Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù†ÛŒØ§Ø² Ù†Ø¯Ø§Ø±Ø¯ ØªØ§ ØµÙØ­Ù‡Ù” ØªÙ…Ø§Ø³ Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ù‡Ø¯. Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ QR Ø¯Ø± Ù‡Ù…ÛŒÙ† ØµÙØ­Ù‡ Ø§Ø² ÛŒÚ© Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÛŒ JS Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ú©Ù‡ Ø§Ø² CDN Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù†Ø³Ø®Ù‡Ù” Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¢ÙÙ„Ø§ÛŒÙ† (Ø¨Ø§ Ú©Ø¯ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø¯Ø§Ø®Ù„ ÙØ§ÛŒÙ„) Ø¨Ø®ÙˆØ§Ù‡ÛŒØ¯ Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ Ù…Ù† Ø§Ø·Ù„Ø§Ø¹ Ø¨Ø¯Ù‡ ØªØ§ Ù†Ø³Ø®Ù‡Ù” inlined Ø±Ø§ Ø¨ÙØ±Ø³ØªÙ….</p>

      <footer>Ù†Ø³Ø®Ù‡Ù” Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ â€” Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ù…ÙˆÙ†Ù‡ Ø¯Ø± ÙÛŒÙ„Ø¯Ù‡Ø§ Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡â€ŒØ§Ù†Ø¯. Ø¨Ø±Ø§ÛŒ Ù†Ù‡Ø§ÛŒÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯ Ùˆ QR Ø¨Ø³Ø§Ø²ÛŒØ¯.</footer>
    </div>
  </main>

  <!-- QR library (CDN). If you want full offline, reply and I'll inline the lib so no net required -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    function buildContactHTML(data){
      const esc = s=>String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      const tel = data.phone ? ('tel:'+data.phone) : '#';
      const wa = data.wa ? ('https://wa.me/'+data.wa.replace(/^\+/,'').replace(/^0+/,'').replace(/\s+/g,'')) : '#';
      const tg = data.tg ? ('https://t.me/'+encodeURIComponent(data.tg)) : '#';
      const ig = data.ig ? ('https://instagram.com/'+encodeURIComponent(data.ig)) : '#';
      const mail = data.email ? ('mailto:'+data.email) : '#';

      let mapLink = '#';
      if(data.addr){
        if(/^-?\d+\.?\d*\s*,\s*-?\d+\.?\d*$/.test(data.addr)){
          mapLink = 'geo:'+data.addr.replace(/\s+/g,'');
        }else{
          mapLink = 'https://maps.google.com/?q='+encodeURIComponent(data.addr);
        }
      }

      return `<!doctype html><html lang=fa dir=rtl><meta charset=utf-8><meta name=viewport content=width=device-width,initial-scale=1><title>ØªÙ…Ø§Ø³ Ø³Ø±ÛŒØ¹</title><style>body{font-family:system-ui,-apple-system,Roboto,\"Vazir\",sans-serif;background:#ffffff;color:#111;margin:0;padding:18px}.c{max-width:640px;margin:0 auto}.btn{display:block;padding:12px 14px;margin:10px 0;border-radius:10px;text-decoration:none;color:#111;background:#f5f7fb;border:1px solid #e7eef8}</style><div class=c><h1>ØªÙ…Ø§Ø³ Ø³Ø±ÛŒØ¹</h1><a class=btn href="${tel}">ğŸ“ ØªÙ…Ø§Ø³: ${esc(data.phone)}</a><a class=btn href="${wa}">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ù¾</a><a class=btn href="${tg}">ğŸ“¨ ØªÙ„Ú¯Ø±Ø§Ù…</a><a class=btn href="${ig}">ğŸ“· Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…</a><a class=btn href="${mail}">âœ‰ï¸ Ø§ÛŒÙ…ÛŒÙ„</a><a class=btn href="${mapLink}">ğŸ“ Ø¢Ø¯Ø±Ø³: ${esc(data.addr)}</a><p style="color:#555;font-size:13px">Ø§Ú¯Ø± Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…Ø±Ø¨ÙˆØ·Ù‡ Ù†ØµØ¨ Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø§ Ù„Ù…Ø³ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ÙˆØ§Ø±Ø¯ Ø¢Ù† Ø§Ù¾ Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯.</p></div></html>`;
    }

    function showPreview(html){
      const p = document.getElementById('preview');
      p.innerHTML = html;
      document.getElementById('previewArea').style.display = 'block';
    }

    function getFormData(){
      return {
        phone: document.getElementById('phone').value.trim(),
        wa: document.getElementById('wa').value.trim(),
        tg: document.getElementById('tg').value.trim(),
        ig: document.getElementById('ig').value.trim(),
        email: document.getElementById('email').value.trim(),
        addr: document.getElementById('addr').value.trim()
      }
    }

    document.getElementById('build').addEventListener('click',()=>{
      const d = getFormData();
      const html = buildContactHTML(d);
      showPreview(html);
      document.getElementById('qrImg').style.display='none';
      document.getElementById('qrCanvas').style.display='none';
    });

    document.getElementById('buildAndQR').addEventListener('click',()=>{
      const d = getFormData();
      const html = buildContactHTML(d);

      showPreview(html);

      const prefix = 'data:text/html;charset=utf-8,';
      const dataUrl = prefix + encodeURIComponent(html);

      const tmp = document.createElement('div');
      tmp.style.position='absolute';tmp.style.left='-9999px';document.body.appendChild(tmp);
      tmp.innerHTML = '';
      const qrcode = new QRCode(tmp, {text: dataUrl, width:512, height:512, correctLevel: QRCode.CorrectLevel.Q});
      setTimeout(()=>{
        const img = tmp.querySelector('img');
        if(img){
          document.getElementById('qrImg').src = img.src;
          document.getElementById('qrImg').style.display='block';
        }else{
          const canvas = tmp.querySelector('canvas');
          if(canvas){
            document.getElementById('qrImg').src = canvas.toDataURL('image/png');
            document.getElementById('qrImg').style.display='block';
          }
        }
        tmp.remove();
      }, 300);
    });

    document.getElementById('downloadHtml').addEventListener('click',()=>{
      const d = getFormData();
      const html = buildContactHTML(d);
      const blob = new Blob([html],{type:'text/html;charset=utf-8'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'contact_hub.html';
      a.click();
      URL.revokeObjectURL(a.href);
    });
  </script>
</body>
</html>
